<h1>All Users</h1>

<% if flash[:notice] %>
  <p style="color: green;"><%= flash[:notice] %></p>
<% end %>

<%= link_to "Add New User", new_user_path %>

<table border="1" cellpadding="5">
  <tr>
    <th>Username</th>
    <th>Books</th>
    <th>Actions</th>
  </tr>

  <% @users.each do |user| %>
    <tr>
      <td><%= user.username %></td>
      <td><%= user.books.map(&:title).join(", ") %></td>
      <td>
        <%= link_to "Show", user_path(user) %> |
        <%= link_to "Edit", edit_user_path(user) %> |
        <%= link_to "Delete", user_path(user), method: :delete, data: { confirm: "Are you sure?" } %>
      </td>
    </tr>
  <% end %>
</table>

<%= link_to "Books", books_path %> |
<%= link_to "UserBooks", user_books_path %>
